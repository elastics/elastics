<!DOCTYPE html>
<html>
  <head>
    <link href='/elastics/assets/global-74df1a51e3d7075c146b619ddfd07904.css' rel='stylesheet' type='text/css' />
<script src='/elastics/assets/global-aacc71e3a462796a62993fb5a8b696a3.js' type='text/javascript'></script>
<title>Elastics - Rake Tasks</title>
    <meta charset="UTF-8" />
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-42574355-3', 'elasticston
      .github.io');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <div id="page-nav" class="nocontent">
      <ul id="nav-menu" class="menu_h_list"><li><a href="#" class="isLabel">elastics</a><ul><li><a href="/elastics/doc/1-elastics/1-Overview.html">Elastics Overview</a></li><li><a href="/elastics/doc/1-elastics/2-Usage-Overview.html">Usage Overview</a></li><li><a href="/elastics/doc/1-elastics/3-Configuration.html">Configuration</a></li><li><a href="/elastics/doc/1-elastics/4-Rake-Tasks.html">Rake Tasks</a></li></ul></li><li><a href="#" class="isLabel">elastics-client</a><ul><li><a href="/elastics/doc/2-elastics-client/1-Overview.html">Overview</a></li><li><a href="/elastics/doc/2-elastics-client/2-API-Methods.html">API Methods</a></li><li><a href="#" class="isLabel">Templating</a><div class="arrow right"></div><ul><li><a href="/elastics/doc/2-elastics-client/3-Templating/1-Templates.html">Templates</a></li><li><a href="/elastics/doc/2-elastics-client/3-Templating/2-Sources.html">Template Sources</a></li><li><a href="/elastics/doc/2-elastics-client/3-Templating/3-Tags.html">Tags</a></li><li><a href="/elastics/doc/2-elastics-client/3-Templating/4-Variables.html">Variables</a></li><li><a href="/elastics/doc/2-elastics-client/3-Templating/5-Interpolation.html">Interpolation</a></li><li><a href="/elastics/doc/2-elastics-client/3-Templating/6-Partials.html">Partial Templates</a></li></ul></li><li><a href="/elastics/doc/2-elastics-client/4-Result-Extenders.html">Result Extenders</a></li><li><a href="/elastics/doc/2-elastics-client/5-Self-Documentation.html">Self Documentation</a></li><li><a href="/elastics/doc/2-elastics-client/6-Utility-Methods.html">Utility Methods</a></li></ul></li><li><a href="#" class="isLabel">elastics-scopes</a><ul><li><a href="/elastics/doc/3-elastics-scopes/1-Overview.html">Overview</a></li><li><a href="/elastics/doc/3-elastics-scopes/2-Scopes.html">Scopes</a></li></ul></li><li><a href="#" class="isLabel">elastics-models</a><ul><li><a href="/elastics/doc/4-elastics-models/1-Overview.html">Overview</a></li><li><a href="/elastics/doc/4-elastics-models/2-ActiveRecord-And-Mongoid-Integration.html">ActiveRecord And Mongoid Integration</a></li><li><a href="/elastics/doc/4-elastics-models/3-ActiveModel-Integration.html">ActiveModel Integration</a></li><li><a href="#" class="isLabel">Modules</a><div class="arrow right"></div><ul><li><a href="/elastics/doc/4-elastics-models/4-Modules/1-Elastics::ModelSyncer.html">Elastics::ModelSyncer</a></li><li><a href="/elastics/doc/4-elastics-models/4-Modules/2-Elastics::ModelIndexer.html">Elastics::ModelIndexer</a></li><li><a href="/elastics/doc/4-elastics-models/4-Modules/3-Elastics::ActiveModel.html">Elastics::ActiveModel</a></li></ul></li><li><a href="/elastics/doc/4-elastics-models/5-Result-Extenders.html">Result Extenders</a></li></ul></li><li><a href="#" class="isLabel">elastics-rails</a><ul><li><a href="/elastics/doc/5-elastics-rails/1-Overview.html">Overview</a></li><li><a href="/elastics/doc/5-elastics-rails/2-Result-Extenders.html">Result Extenders</a></li></ul></li><li><a href="#" class="isLabel">elastics-admin</a><ul><li><a href="/elastics/doc/6-elastics-admin/1-Binary.html">Binary</a></li><li><a href="/elastics/doc/6-elastics-admin/2-Live-Reindex.html">Live Reindex</a></li></ul></li><li><a href="#" class="isLabel">tutorials</a><ul><li><a href="/elastics/doc/7-tutorials/1-Elastics-vs-Tire.html">Why you should use Elastics rather than Tire</a></li><li><a href="/elastics/doc/7-tutorials/2-Migrate-from-0.x.html">How to migrate from Flex 0.x</a></li><li><a href="/elastics/doc/7-tutorials/3-Index-and-Search-your-Models.html">Index and Search your Models</a></li><li><a href="/elastics/doc/7-tutorials/4-Index-and-Search-External-Data.html">Index and Search External Data</a></li></ul></li></ul>
      <div id="google-search">
        <script type="text/javascript">
          (function() {
            var cx = '001168365143071728136:w4opkcwdl3y';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                '//www.google.com/cse/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
          })();
        </script>
        <gcse:search>&nbsp;</gcse:search>
      </div>
    </div>
    <div id="page-toc">
      <div id="logo">
        <img src="/elastics/images/elastics-logo-200.png" />
      </div>
    </div>
    <div id="content">
      <a id="badge" href="https://badge.fury.io/rb/elastics-client"><img src="https://badge.fury.io/rb/elastics-client.png" /></a>
      <div class="breadcrumb nocontent">
        <span><a href="/elastics/doc">Elastics</a></span> &gt; <span><a href="/elastics/doc/1-elastics">elastics</a></span> &gt; <span>Rake Tasks</span>
      </div>
      <h1 id="rake-tasks">Rake Tasks</h1>

<table class="code-topics" cellspacing="0" cellpadding="0">
  <tr>
    <td>
      <code>elastics:index:create</code>
    </td>
    <td><p>This rake task reads the configuration <code>elastics.yml</code> file with your custom mappings, merges it with the internally generated mapping and routings, and creates the index. It is important to run this task when you start a new app, specially if you use the <code>elastics-models</code> gem with parent/child relationships (see <a href="/elastics/doc/4-elastics-models">elastics-models</a>).</p>

<h4>Environment variables</h4>

<p>This task can be customized with the following environment variables:</p>

<ul>
<li><code>FORCE</code> Deletes the existing indices before running. Default <code>false</code>.</li>
<li><code>INDEX</code> String representing one or a comma-separated list of indices to create. Default: <code>Elastics::Configuration.variables[:index]</code>.</li>
</ul>

    </td>
  </tr>
  <tr>
    <td>
      <code>elastics:index:delete</code>
    </td>
    <td><p>Deletes the index/indices.</p>

<h4>Environment variables</h4>

<p>This task can be customized with the following environment variables:</p>

<ul>
<li><code>INDEX</code> String representing one or a comma-separated list of indices to delete. Default: <code>Elastics::Configuration.variables[:index]</code>.</li>
</ul>

    </td>
  </tr>
  <tr>
    <td>
      <code>elastics:import</code>
    </td>
    <td><blockquote>
<p>This is a specific task provided by the <code>elastics-models</code> gem.</p>
</blockquote>

<p>It imports all or any of the models of your application.</p>

<h4>Environment variables</h4>

<p>This task can be customized with the following environment variables:</p>

<ul>
<li><code>FORCE</code> Deletes the existing indices before reindexing. Default <code>false</code>.</li>
<li><code>BATCH_SIZE</code> The batch size used to retrieve the records and bulk post to the elasticsearch server. Default <code>500</code>.</li>
<li><code>TIMEOUT</code> The HTTP-client timeout. Default <code>60</code> for this task. (it is usually <code>5</code> for regular queries as set in <code>Configuration.http_client_options[:timeout]</code>). You might need a higher timeout if you raise the <code>BATCH_SIZE</code>.</li>
<li><code>IMPORT_OPTIONS</code> A query string like string representing a hash of options to be used with the <code>find_in_batches</code> methods.</li>
<li><code>MODELS</code> String representing one or a comma-separated list of model classes. Default <code>Elastics::Configuration.elastics_models</code>.</li>
</ul>

    </td>
  </tr>
  <tr>
    <td>
      <code>elastics:admin:dump</code>
    </td>
    <td><blockquote>
<p>This is a specific task provided by the <code>elastics-admin</code> gem.</p>
</blockquote>

<p>It dumps the index/indices to a dump file, which can be feed to the <code>elastics:admin:load</code> task to reload/restore the index.</p>

<h4>Environment variables</h4>

<p>This task can be customized with the following environment variables:</p>

<ul>
<li><code>FILE</code> The path to the dump file. Default: <code>&#39;./elastics.dump&#39;</code></li>
<li><code>INDEX</code> String representing one or a comma-separated list of indices to dump. Default: <code>Elastics::Configuration.variables[:index]</code></li>
<li><code>TYPE</code> String representing one or a comma-separated list of types to dump.  Default: <code>Elastics::Configuration.variables[:type]</code></li>
<li><code>SCROLL</code> elasticsearch option for the scan_type search performed to retrieve the documents. Default: <code>&#39;5m&#39;</code></li>
<li><code>SIZE</code> Represents the number of documents per shard dumped at a time. Default: <code>50</code></li>
<li><code>VERBOSE</code> Prints info during the process. Default: <code>true</code></li>
</ul>

    </td>
  </tr>
  <tr>
    <td>
      <code>elastics:admin:load</code>
    </td>
    <td><blockquote>
<p>This is a specific task provided by the <code>elastics-admin</code> gem.</p>
</blockquote>

<p>It reload/restore the index by loading a dump file (produced by the the <code>elastics:admin:dump</code>)</p>

<blockquote>
<p><strong>Notice</strong>: It loads the data into the original index name. If you want to reload the data into another index, you must set the <code>INDEX_MAP</code> variable.</p>
</blockquote>

<h4>Environment variables</h4>

<p>This task can be customized with the following environment variables:</p>

<ul>
<li><code>FILE</code> The path to the dump file. Default: <code>&#39;./elastics.dump&#39;</code></li>
<li><code>BATCH_SIZE</code> The document batch size used to import the dump file to the elasticsearch server. Default <code>500</code>.</li>
<li><code>INDEX_MAP</code>  The index rename map (example: -m=my<em>dumped</em>index<em>name:my</em>loaded<em>index</em>name,a:b).</li>
<li><code>TIMEOUT</code> The HTTP-client timeout. Default <code>60</code> for this task. (it is usually <code>5</code> for regular queries as set in <code>Configuration.http_client_options[:timeout]</code>).  You might need a higher timeout if you raise the <code>BATCH_SIZE</code>.</li>
<li><code>VERBOSE</code> Prints info during the process. Default: <code>true</code></li>
</ul>

    </td>
  </tr>
</table>

<br />
      <div class="breadcrumb nocontent">
        <span><a href="/elastics/doc">Elastics</a></span> &gt; <span><a href="/elastics/doc/1-elastics">elastics</a></span> &gt; <span>Rake Tasks</span>
      </div>
    </div>
    <div id="footer" class="nocontent">
      Copyright &copy; 2012-2013 by <a href="mailto://dd.nexus@gmail.com">Domizio Demichelis</a> &mdash; Sponsored by <a href="http://www.escalatemedia.com">Escalate Media</a> and <a href="http://www.barquin.com">Barquin International</a>
    </div>
  </body>
</html>