<!DOCTYPE html>
<html>
  <head>
    <link href='/elastics/assets/global-74df1a51e3d7075c146b619ddfd07904.css' rel='stylesheet' type='text/css' />
<script src='/elastics/assets/global-aacc71e3a462796a62993fb5a8b696a3.js' type='text/javascript'></script>
<title>Elastics - Configuration</title>
    <meta charset="UTF-8" />
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-42574355-3', 'elasticston
      .github.io');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <div id="page-nav" class="nocontent">
      <ul id="nav-menu" class="menu_h_list"><li><a href="#" class="isLabel">elastics</a><ul><li><a href="/elastics/doc/1-elastics/1-Overview.html">Elastics Overview</a></li><li><a href="/elastics/doc/1-elastics/2-Usage-Overview.html">Usage Overview</a></li><li><a href="/elastics/doc/1-elastics/3-Configuration.html">Configuration</a></li><li><a href="/elastics/doc/1-elastics/4-Rake-Tasks.html">Rake Tasks</a></li></ul></li><li><a href="#" class="isLabel">elastics-client</a><ul><li><a href="/elastics/doc/2-elastics-client/1-Overview.html">Overview</a></li><li><a href="/elastics/doc/2-elastics-client/2-API-Methods.html">API Methods</a></li><li><a href="#" class="isLabel">Templating</a><div class="arrow right"></div><ul><li><a href="/elastics/doc/2-elastics-client/3-Templating/1-Templates.html">Templates</a></li><li><a href="/elastics/doc/2-elastics-client/3-Templating/2-Sources.html">Template Sources</a></li><li><a href="/elastics/doc/2-elastics-client/3-Templating/3-Tags.html">Tags</a></li><li><a href="/elastics/doc/2-elastics-client/3-Templating/4-Variables.html">Variables</a></li><li><a href="/elastics/doc/2-elastics-client/3-Templating/5-Interpolation.html">Interpolation</a></li><li><a href="/elastics/doc/2-elastics-client/3-Templating/6-Partials.html">Partial Templates</a></li></ul></li><li><a href="/elastics/doc/2-elastics-client/4-Result-Extenders.html">Result Extenders</a></li><li><a href="/elastics/doc/2-elastics-client/5-Self-Documentation.html">Self Documentation</a></li><li><a href="/elastics/doc/2-elastics-client/6-Utility-Methods.html">Utility Methods</a></li></ul></li><li><a href="#" class="isLabel">elastics-scopes</a><ul><li><a href="/elastics/doc/3-elastics-scopes/1-Overview.html">Overview</a></li><li><a href="/elastics/doc/3-elastics-scopes/2-Scopes.html">Scopes</a></li></ul></li><li><a href="#" class="isLabel">elastics-models</a><ul><li><a href="/elastics/doc/4-elastics-models/1-Overview.html">Overview</a></li><li><a href="/elastics/doc/4-elastics-models/2-ActiveRecord-And-Mongoid-Integration.html">ActiveRecord And Mongoid Integration</a></li><li><a href="/elastics/doc/4-elastics-models/3-ActiveModel-Integration.html">ActiveModel Integration</a></li><li><a href="#" class="isLabel">Modules</a><div class="arrow right"></div><ul><li><a href="/elastics/doc/4-elastics-models/4-Modules/1-Elastics::ModelSyncer.html">Elastics::ModelSyncer</a></li><li><a href="/elastics/doc/4-elastics-models/4-Modules/2-Elastics::ModelIndexer.html">Elastics::ModelIndexer</a></li><li><a href="/elastics/doc/4-elastics-models/4-Modules/3-Elastics::ActiveModel.html">Elastics::ActiveModel</a></li></ul></li><li><a href="/elastics/doc/4-elastics-models/5-Result-Extenders.html">Result Extenders</a></li></ul></li><li><a href="#" class="isLabel">elastics-rails</a><ul><li><a href="/elastics/doc/5-elastics-rails/1-Overview.html">Overview</a></li><li><a href="/elastics/doc/5-elastics-rails/2-Result-Extenders.html">Result Extenders</a></li></ul></li><li><a href="#" class="isLabel">elastics-admin</a><ul><li><a href="/elastics/doc/6-elastics-admin/1-Binary.html">Binary</a></li><li><a href="/elastics/doc/6-elastics-admin/2-Live-Reindex.html">Live Reindex</a></li></ul></li><li><a href="#" class="isLabel">tutorials</a><ul><li><a href="/elastics/doc/7-tutorials/1-Elastics-vs-Tire.html">Why you should use Elastics rather than Tire</a></li><li><a href="/elastics/doc/7-tutorials/2-Migrate-from-0.x.html">How to migrate from Flex 0.x</a></li><li><a href="/elastics/doc/7-tutorials/3-Index-and-Search-your-Models.html">Index and Search your Models</a></li><li><a href="/elastics/doc/7-tutorials/4-Index-and-Search-External-Data.html">Index and Search External Data</a></li></ul></li></ul>
      <div id="google-search">
        <script type="text/javascript">
          (function() {
            var cx = '001168365143071728136:w4opkcwdl3y';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                '//www.google.com/cse/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
          })();
        </script>
        <gcse:search>&nbsp;</gcse:search>
      </div>
    </div>
    <div id="page-toc">
      <div id="logo">
        <img src="/elastics/images/elastics-logo-200.png" />
      </div>
    </div>
    <div id="content">
      <a id="badge" href="https://badge.fury.io/rb/elastics-client"><img src="https://badge.fury.io/rb/elastics-client.png" /></a>
      <div class="breadcrumb nocontent">
        <span><a href="/elastics/doc">Elastics</a></span> &gt; <span><a href="/elastics/doc/1-elastics">elastics</a></span> &gt; <span>Configuration</span>
      </div>
      <h1 id="configuration">Configuration</h1>

<p>This class is also aliased as <code>Elastics::Conf</code>.</p>

<p>You can configure the elastics gems by changing their configuration settings. You can set them directly in any part of your code or the console like:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Elastics</span><span class="o">::</span><span class="no">Configuration</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug_result</span> <span class="o">=</span> <span class="kp">true</span></code></pre></div>

<p>or setting them inside a <code>Elastics::Configuration.configure</code> block:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Elastics</span><span class="o">::</span><span class="no">Configuration</span><span class="o">.</span><span class="n">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">conf</span><span class="o">|</span>
  <span class="n">conf</span><span class="o">.</span><span class="n">http_client</span><span class="o">.</span><span class="n">base_uri</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:9222&#39;</span>
  <span class="n">conf</span><span class="o">.</span><span class="n">http_client</span><span class="o">.</span><span class="n">options</span>  <span class="o">=</span> <span class="p">{</span><span class="ss">:timeout</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">}</span>
  <span class="n">conf</span><span class="o">.</span><span class="n">variables</span><span class="o">[</span><span class="ss">:index</span><span class="o">]</span>    <span class="o">=</span> <span class="s1">&#39;my_index&#39;</span>
  <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span></code></pre></div>

<p>If you use the rails integration, you usually do so in an initializer, usually generated by the <code>elastics:setup</code> generator (see <a href="/elastics/doc/5-elastics-rails">elastics-rails</a>).</p>

<h2 id="settings">Settings</h2>

<table class="code-topics" id="config" cellspacing="0" cellpadding="0">
  <tr>
    <td>
      <code>result_extenders</code>
    </td>
    <td>
      <p>An array of extender modules. Each gem pushes its default:</p>
      
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># elastics gem</span>
<span class="o">[</span> <span class="no">Elastics</span><span class="o">::</span><span class="no">Result</span><span class="o">::</span><span class="no">Document</span><span class="p">,</span>
  <span class="no">Elastics</span><span class="o">::</span><span class="no">Result</span><span class="o">::</span><span class="no">Search</span><span class="p">,</span>
  <span class="no">Elastics</span><span class="o">::</span><span class="no">Result</span><span class="o">::</span><span class="no">MultiGet</span><span class="p">,</span>
  <span class="no">Elastics</span><span class="o">::</span><span class="no">Result</span><span class="o">::</span><span class="no">Bulk</span> <span class="o">]</span>

<span class="c1"># elastics-models gem</span>
<span class="o">[</span> <span class="no">Elastics</span><span class="o">::</span><span class="no">Result</span><span class="o">::</span><span class="no">DocumentLoader</span><span class="p">,</span>
  <span class="no">Elastics</span><span class="o">::</span><span class="no">Result</span><span class="o">::</span><span class="no">SearchLoader</span><span class="p">,</span>
  <span class="no">Elastics</span><span class="o">::</span><span class="no">Result</span><span class="o">::</span><span class="no">ActiveModel</span> <span class="o">]</span>

<span class="c1"># elastics-scopes gem</span>
<span class="o">[</span> <span class="no">Elastics</span><span class="o">::</span><span class="no">Result</span><span class="o">::</span><span class="no">Scope</span> <span class="o">]</span></code></pre></div>
<p>You usually push your own extenders to the <code>result_extenders</code> array (see <a href="/elastics/doc/2-elastics-client/4-Result-Extenders.html">Result Extenders</a>)</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>ansi</code>
    </td>
    <td><p>Boolean. If <code>true</code> prints logs and progress bars in colored ANSI. Default <code>true</code> (when supported).</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>logger</code>
    </td>
    <td><p>The Elastics logger. Default <code>Logger.new(STDERR)</code></p>

    </td>
  </tr>
  <tr>
    <td>
      <code>logger.debug_variables</code>
    </td>
    <td><p>Boolean. If <code>true</code> it prints the merged variables. Default <code>true</code> unless in Rails Console.</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>logger.debug_request</code>
    </td>
    <td><p>Boolean. If <code>true</code> it prints the request. Default <code>true</code>.</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>logger.debug_result</code>
    </td>
    <td><p>Boolean. If <code>true</code> it prints also the result. Default <code>true</code> unless in Rails Console.</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>logger.curl_format</code>
    </td>
    <td><p>Boolean. If <code>true</code> it uses curl-like logging info, suitable to be copied and pasted in a terminal. Default <code>false</code> (YAML logging).</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>logger.log_to_rails_logger</code>
    </td>
    <td><blockquote>
<p>This is a specific configuration for the <code>elastics-rails</code> gem.</p>
</blockquote>

<p>Boolean. If <code>true</code> it forwards the messages to the <code>Rails.logger</code>. Defaut <code>true</code> unless in Rails Console.</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>logger.log_to_stdout</code>
    </td>
    <td><blockquote>
<p>This is a specific configuration for the <code>elastics-rails</code> gem.</p>
</blockquote>

<p>Boolean. Option added by <code>elastics-rails</code>. If <code>true</code> prints the log to <code>STDOUT</code>. Default <code>false</code> unless in Rails Console.</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>elastics_models</code>
    </td>
    <td><blockquote>
<p>This is a specific configuration for the <code>elastics-models</code> gem.</p>
</blockquote>

<p>An array of model classes (or model class names) that your app will index. This is the only required configuration setting if you use the <code>Elastics::ModelIndexer</code> integration, since it is used to generate the default mappings and the default models for the <code>import</code> task.</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>elastics_active_models</code>
    </td>
    <td><blockquote>
<p>This is a specific configuration for the <code>elastics-models</code> gem.</p>
</blockquote>

<p>An array of ActiveModel classes (or model class names) that your app defines. This is the only required configuration setting if you use the <code>Elastics::ActiveModel</code> integration, since it is used to generate the default mappings.</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>elastics_dir</code>
    </td>
    <td><p>The path where Elastics searches for source files. Default <code>&#39;./elastics&#39;</code> or <code>&quot;#{Rails.root}/app/elastics&quot;</code> in Rails.</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>config_file</code>
    </td>
    <td><p>A YAML file usually containing the custom index mapping. Default <code>&#39;./config/elastics.yml&#39;</code> or <code>&quot;#{Rails.root}/config/elastics.yml&quot;</code> in Rails.</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>http_client</code>
    </td>
    <td><p>The HTTP client instance. Default an object of class <code>Elastics::HttpClients::Patron</code> or <code>Elastics::HttpClients::RestClient</code>, depending on which gem you have installed (<code>patron</code> or <code>rest-client</code>). If you create a custom client class you must set it.</p>

<blockquote>
<p><strong>Temporary Note</strong>: The <code>patron</code> gem currently available on rubygem (v0.4.18) is missing the support for sending data with delete queries. As the result it fails with the <code>delete_by_query</code> elasticsearch API, when the query is the request body and not the param. If you want full support until a new version will be pushed to rubygems, you should use <code>gem &#39;patron&#39;, :git =&gt; &#39;https://github.com/patron/patron.git&#39;</code> or switch to the <code>rest-client</code> gem.</p>
</blockquote>

    </td>
  </tr>
  <tr>
    <td>
      <code>http_client.base_uri</code>
    </td>
    <td><p>The base uri of the elasticsearch server used for all the requests. Default <code>&#39;http://localhost:9200&#39;</code>.</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>http_client.options</code>
    </td>
    <td><p>Hash of options passed to the <code>http_client#new</code> method. Default <code>{}</code>.</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>http_client.raise_proc</code>
    </td>
    <td><blockquote>
<p>This variable is experimental and may be removed in a next vesion.</p>
</blockquote>

<p>A proc that should return whether or not to raise an error, depending on the response. It is used for example to decide whether a 404 response code should raise an error or should just be ignored. Default <code>proc{|respose| response.status &gt;= 400}</code></p>

    </td>
  </tr>
  <tr>
    <td>
      <code>variables</code>
    </td>
    <td><p>The <code>Elastics::Variable</code> object (Hash subclass) of interpolation variables used as the lowest default level. Default:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Elastics</span><span class="o">::</span><span class="no">Variables</span><span class="o">.</span><span class="n">new</span> <span class="ss">:index</span>      <span class="o">=&gt;</span> <span class="kp">nil</span><span class="p">,</span>
                        <span class="ss">:type</span>       <span class="o">=&gt;</span> <span class="kp">nil</span><span class="p">,</span>
                        <span class="ss">:params</span>     <span class="o">=&gt;</span> <span class="p">{},</span>
                        <span class="ss">:no_pruning</span> <span class="o">=&gt;</span> <span class="o">[]</span></code></pre></div>
<blockquote>
<p>The <code>elastics-rails</code> gem sets the default <code>variables[:index]</code> as the <code>app_id</code> (see below).</p>
</blockquote>

<p>(see <a href="/elastics/doc/2-elastics-client/3-Templating/4-Variables.html">Variables</a>)</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>app_id</code>
    </td>
    <td><p>An unique string used to identify your app. Default: <code>nil</code> or the uderscored rails application name, plus the environment in rails. It must be set if you use any <code>reindex</code> method. Used by the elastics-reindex feature (see <a href="/elastics/doc/6-elastics-admin/2-Live-Reindex.html">Live Reindex</a>).</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>optimize_indexing</code>
    </td>
    <td><p>Boolean. Option added by <code>elastics-admin</code>. If <code>true</code> it optimizes the new indices. Default <code>true</code>.</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>redis</code>
    </td>
    <td><p>The redis client object. Default: <code>$redis || Redis.current</code>. Used by the live-reindex feature (see <a href="/elastics/doc/6-elastics-admin/2-Live-Reindex.html">Live Reindex</a>).</p>

    </td>
  </tr>
  <tr>
    <td>
      <code>on_stop_indexing</code>
    </td>
    <td><p>A proc that should ensure to stop/suspend all the actions that would produce any change in the indices being live-reindexed. Used by the live-reindex feature and overridden by the <code>on_stop_indexing</code> block (see <a href="/elastics/doc/6-elastics-admin/2-Live-Reindex.html#id1">on<em>stop</em>indexing</a>).</p>

    </td>
  </tr>
</table>

<br />
      <div class="breadcrumb nocontent">
        <span><a href="/elastics/doc">Elastics</a></span> &gt; <span><a href="/elastics/doc/1-elastics">elastics</a></span> &gt; <span>Configuration</span>
      </div>
    </div>
    <div id="footer" class="nocontent">
      Copyright &copy; 2012-2013 by <a href="mailto://dd.nexus@gmail.com">Domizio Demichelis</a> &mdash; Sponsored by <a href="http://www.escalatemedia.com">Escalate Media</a> and <a href="http://www.barquin.com">Barquin International</a>
    </div>
  </body>
</html>